(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{172:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/music",function(){return t(1156)}])},1156:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var s=t(7568),i=t(655),r=t(5893),a=t(6979),l=t(4418),o=t(3100),c=t(2498),u=t(8855),d=t(6684),h=t(1533),f=t(7297);function p(){var e=(0,f.Z)(["\n  text-align: justify;\n  font-size: 15px;\n"]);return p=function(){return e},e}var v=t(166).Z.p(p()),m=t(8100),g=t(3642),x=t(7294),j=t(7673),y=t(3653),b=t.n(y),w=t(8764).lW,_=function(){var e=(0,s.Z)((function(){var e,n,t,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,b().get("http://localhost:3001/api/env")];case 1:return e=i.sent().data,n=e.client_id,t=e.client_secret,s=e.refresh_token,[4,fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:"Basic ".concat(w.from("".concat(n,":").concat(t)).toString("base64")),"Content-Type":"application/x-www-form-urlencoded"},body:j.stringify({grant_type:"refresh_token",refresh_token:s})})];case 2:return[2,i.sent().json()]}}))}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,s.Z)((function(e){var n;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,_()];case 1:return n=t.sent().access_token,[4,fetch("https://api.spotify.com/v1/playlists/5TQwMBSiBWIkpGdVlfe2T0/tracks",{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({uris:[e]})})];case 2:return[2,t.sent().json()]}}))}));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=(0,s.Z)((function(e,n){var t;return(0,i.__generator)(this,(function(s){switch(s.label){case 0:return[4,_()];case 1:return t=s.sent().access_token,[4,fetch("".concat("https://api.spotify.com/v1/search","?q=").concat(e,"+artist:").concat(n,"&type=track&limit=1"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})];case 2:return[2,s.sent().json()]}}))}));return function(n,t){return e.apply(this,arguments)}}(),z=function(){var e=(0,m.ZP)("/api/spotify",(function(e){return fetch(e).then((function(e){return e.json()}))})).data;if(!e);var n=(0,x.useState)(!1),t=n[0],f=n[1],p=(0,x.useState)(!1),j=(p[0],p[1]),y=(0,x.useRef)(!1),b=(0,x.useRef)(!1),w=function(){var e=(0,s.Z)((function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return y.current.value&&b.current.value?[4,N(b.current.value,y.current.value)]:[3,2];case 1:return e=n.sent(),k(e.tracks.items[0].uri),y.current.value=null,b.current.value=null,j(!0),alert("You successfully added the song to the playlist :)"),[3,3];case 2:alert("Input both Artist name and Song name please"),n.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(a.W,{children:[(0,r.jsx)(l.X,{as:"h1",variant:"section-title",align:"center",fontSize:50,children:"Explore My Music"}),(0,r.jsx)(l.X,{as:"h3",variant:"section-title",children:" Currently Playing "}),(0,r.jsxs)(o.xu,{borderRadius:"lg",bg:(0,c.ff)("whiteAlpha.500","whiteAlpha.200"),p:3,mb:10,align:"center",children:[(0,r.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"}),(0,r.jsxs)("a",{target:"_blank",rel:"noopener noreferer",href:(null===e||void 0===e?void 0:e.isPlaying)?null===e||void 0===e?void 0:e.songUrl:"https://open.spotify.com/user/snhcsnwrhzbkf3x6ls36nz7hh?si=ad63024631b64f4a",className:"relative flex items-center p-5 space-x-4 transition-shadow rounded-md hover:shadow-md",children:[(0,r.jsx)("div",{className:"w-32",children:(null===e||void 0===e?void 0:e.isPlaying)?(0,r.jsx)("img",{className:"w-32 shadow-sm",src:null===e||void 0===e?void 0:e.albumImageUrl,alt:null===e||void 0===e?void 0:e.album}):(0,r.jsx)(g.gvY,{size:64,color:"#1ED760"})}),(0,r.jsxs)("div",{className:"flex-1 text-2xl",children:[(0,r.jsx)("p",{className:"font-bold component",children:(null===e||void 0===e?void 0:e.isPlaying)?null===e||void 0===e?void 0:e.title:"Not Listening"}),(0,r.jsx)("p",{className:"text-sm font-dark",children:(null===e||void 0===e?void 0:e.isPlaying)?null===e||void 0===e?void 0:e.artist:"Spotify"})]}),(0,r.jsx)("div",{className:"absolute bottom-0 right-0",children:(0,r.jsx)(g.gvY,{size:20,color:"#1ED760"})})]})]}),(0,r.jsxs)("h1",{align:"center",children:[(null===e||void 0===e?void 0:e.isPlaying)?null:e?(0,r.jsx)(u.z,{onClick:function(){return f(!t)},children:"Recently Played"}):(0,r.jsxs)(u.z,{children:["No Recently Played Song :","("]}),!t||(null===e||void 0===e?void 0:e.isPlaying)?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o.xu,{borderRadius:"lg",bg:(0,c.ff)("whiteAlpha.1000","whiteAlpha.200"),p:3,mb:10,align:"center",children:[(0,r.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"}),(0,r.jsxs)("a",{target:"_blank",rel:"noopener noreferer",href:(null===e||void 0===e?void 0:e.isPlaying)?null===e||void 0===e?void 0:e.songUrl:"https://open.spotify.com/user/snhcsnwrhzbkf3x6ls36nz7hh?si=ad63024631b64f4a",className:"relative flex items-center p-5 space-x-4 transition-shadow rounded-md hover:shadow-md",children:[(0,r.jsx)("div",{className:"w-32",children:(0,r.jsx)("img",{className:"w-32 shadow-sm",src:null===e||void 0===e?void 0:e.albumImageUrl})}),(0,r.jsxs)("div",{className:"flex-1 text-2xl",children:[(0,r.jsx)("p",{className:"font-bold component",children:null===e||void 0===e?void 0:e.title}),(0,r.jsx)("p",{className:"text-sm font-dark",children:null===e||void 0===e?void 0:e.artist})]}),(0,r.jsx)("div",{className:"absolute bottom-0 right-0",children:(0,r.jsx)(g.gvY,{size:20,color:"#1ED760"})})]})]})})]}),(0,r.jsxs)(d.K,{spacing:2,children:[(0,r.jsx)(l.X,{as:"h3",variant:"section-title",alignItems:"center",children:" Suggest Some Music "}),(0,r.jsx)(v,{children:"You can submit the artist name and the song name and the song will be entered into my spotify playlist, hope you have some good suggestions :)"}),(0,r.jsxs)(d.K,{spacing:.1,children:[(0,r.jsx)(h.I,{ref:y,placeholder:"Artist Name",bg:(0,c.ff)("whiteAlpha.500","whiteAlpha.200")}),(0,r.jsx)("br",{}),(0,r.jsx)(h.I,{ref:b,placeholder:"Song Name",bg:(0,c.ff)("whiteAlpha.500","whiteAlpha.200")}),(0,r.jsx)("br",{}),(0,r.jsx)(u.z,{onClick:w,children:"Submit"})]})]})]})}}},function(e){e.O(0,[415,745,774,888,179],(function(){return n=172,e(e.s=n);var n}));var n=e.O();_N_E=n}]);