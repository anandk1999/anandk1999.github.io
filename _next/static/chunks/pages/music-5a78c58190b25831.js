(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{172:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/music",function(){return n(6226)}])},6226:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var s=n(5893),i=n(6979),l=n(4418),a=n(3100),r=n(2498),o=n(9222),c=n(6684),h=n(1686),d=n(7297),u=n(7355);function p(){let e=(0,d.Z)(["\n  text-align: justify;\n  font-size: 15px;\n"]);return p=function(){return e},e}let f=u.Z.p(p());var m=n(9734),x=n(7735),g=n(7294),v=n(7334),j=n.n(v),y=n(6154),w=n(1876).Buffer;let b=async()=>{let{data:e}=await y.Z.get("http://localhost:3001/api/env"),{client_id:t,client_secret:n,refresh_token:s}=e,i=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:"Basic ".concat(w.from("".concat(t,":").concat(n)).toString("base64")),"Content-Type":"application/x-www-form-urlencoded"},body:j().stringify({grant_type:"refresh_token",refresh_token:s})});return i.json()},N=async e=>{let{access_token:t}=await b(),n=await fetch("https://api.spotify.com/v1/playlists/5TQwMBSiBWIkpGdVlfe2T0/tracks",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({uris:[e]})});return n.json()},k=async(e,t)=>{let{access_token:n}=await b(),s=await fetch("".concat("https://api.spotify.com/v1/search","?q=").concat(e,"+artist:").concat(t,"&type=track&limit=1"),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});return s.json()},_=()=>{let e=e=>fetch(e).then(e=>e.json()),{data:t}=(0,m.ZP)("/api/spotify",e),[n,d]=(0,g.useState)(!1),[u,p]=(0,g.useState)(!1),v=(0,g.useRef)(!1),j=(0,g.useRef)(!1),y=async()=>{if(v.current.value&&j.current.value){let e=await k(j.current.value,v.current.value);N(e.tracks.items[0].uri),v.current.value=null,j.current.value=null,p(!0),alert("You successfully added the song to the playlist :)")}else alert("Input both Artist name and Song name please")};return(0,s.jsxs)(i.W,{children:[(0,s.jsx)(l.X,{as:"h1",variant:"section-title",align:"center",fontSize:50,children:"Explore My Music"}),(0,s.jsx)(l.X,{as:"h3",variant:"section-title",children:" Currently Playing "}),(0,s.jsxs)(a.xu,{borderRadius:"lg",bg:(0,r.ff)("whiteAlpha.500","whiteAlpha.200"),p:3,mb:10,align:"center",children:[(0,s.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"}),(0,s.jsxs)("a",{target:"_blank",rel:"noopener noreferer",href:(null==t?void 0:t.isPlaying)?null==t?void 0:t.songUrl:"https://open.spotify.com/user/snhcsnwrhzbkf3x6ls36nz7hh?si=ad63024631b64f4a",className:"relative flex items-center p-5 space-x-4 transition-shadow rounded-md hover:shadow-md",children:[(0,s.jsx)("div",{className:"w-32",children:(null==t?void 0:t.isPlaying)?(0,s.jsx)("img",{className:"w-32 shadow-sm",src:null==t?void 0:t.albumImageUrl,alt:null==t?void 0:t.album}):(0,s.jsx)(x.gvY,{size:64,color:"#1ED760"})}),(0,s.jsxs)("div",{className:"flex-1 text-2xl",children:[(0,s.jsx)("p",{className:"font-bold component",children:(null==t?void 0:t.isPlaying)?null==t?void 0:t.title:"Not Listening"}),(0,s.jsx)("p",{className:"text-sm font-dark",children:(null==t?void 0:t.isPlaying)?null==t?void 0:t.artist:"Spotify"})]}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0",children:(0,s.jsx)(x.gvY,{size:20,color:"#1ED760"})})]})]}),(0,s.jsxs)("h1",{align:"center",children:[(null==t?void 0:t.isPlaying)?null:t?(0,s.jsx)(o.z,{onClick:()=>d(!n),children:"Recently Played"}):(0,s.jsxs)(o.z,{children:["No Recently Played Song :","("]}),!n||(null==t?void 0:t.isPlaying)?null:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(a.xu,{borderRadius:"lg",bg:(0,r.ff)("whiteAlpha.1000","whiteAlpha.200"),p:3,mb:10,align:"center",children:[(0,s.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"}),(0,s.jsxs)("a",{target:"_blank",rel:"noopener noreferer",href:(null==t?void 0:t.isPlaying)?null==t?void 0:t.songUrl:"https://open.spotify.com/user/snhcsnwrhzbkf3x6ls36nz7hh?si=ad63024631b64f4a",className:"relative flex items-center p-5 space-x-4 transition-shadow rounded-md hover:shadow-md",children:[(0,s.jsx)("div",{className:"w-32",children:(0,s.jsx)("img",{className:"w-32 shadow-sm",src:null==t?void 0:t.albumImageUrl})}),(0,s.jsxs)("div",{className:"flex-1 text-2xl",children:[(0,s.jsx)("p",{className:"font-bold component",children:null==t?void 0:t.title}),(0,s.jsx)("p",{className:"text-sm font-dark",children:null==t?void 0:t.artist})]}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0",children:(0,s.jsx)(x.gvY,{size:20,color:"#1ED760"})})]})]})})]}),(0,s.jsxs)(c.K,{spacing:2,children:[(0,s.jsx)(l.X,{as:"h3",variant:"section-title",alignItems:"center",children:" Suggest Some Music "}),(0,s.jsx)(f,{children:"You can submit the artist name and the song name and the song will be entered into my spotify playlist, hope you have some good suggestions :)"}),(0,s.jsxs)(c.K,{spacing:.1,children:[(0,s.jsx)(h.I,{ref:v,placeholder:"Artist Name",bg:(0,r.ff)("whiteAlpha.500","whiteAlpha.200")}),(0,s.jsx)("br",{}),(0,s.jsx)(h.I,{ref:j,placeholder:"Song Name",bg:(0,r.ff)("whiteAlpha.500","whiteAlpha.200")}),(0,s.jsx)("br",{}),(0,s.jsx)(o.z,{onClick:y,children:"Submit"})]})]})]})};var z=_}},function(e){e.O(0,[415,537,774,888,179],function(){return e(e.s=172)}),_N_E=e.O()}]);